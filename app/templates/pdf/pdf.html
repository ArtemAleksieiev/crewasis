<!doctype html>
<html lang="en">
  <head>
    {% block head %}
      {% block meta %}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Crewasis Database">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
      {% endblock meta %}
    <title> {% block title %}{% endblock %}</title>

    <!-- Add to homescreen for Chrome on Android -->
    {% block android %}
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="{{ url_for('static', filename='img/android-desktop.png') }}">
    {% endblock android %}

    <!-- Add to homescreen for Safari on iOS -->
    {% block ios %}
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Crewasis">
    <link rel="apple-touch-icon-precomposed" href="{{ url_for('static', filename='img/ios-desktop.png') }}">
    {% endblock ios %}

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    {% block ms %}
    <meta name="msapplication-TileImage" content="{{ url_for('static', filename='img/touch/ms-touch-icon-144x144-precomposed.png') }}">
    <meta name="msapplication-TileColor" content="#3372DF">
    {% endblock ms %}


    {% block stylesheets %}

    <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.ico') }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/lib/material.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

    {% endblock stylesheets %}

    {% endblock head %}
  </head>
  <body>
    <div class="fbd-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
      {% include "site_template/header.html" %}
      {% include "site_template/pdfbar.html" %}
     <main class="mdl-layout__content mdl-color--grey-100">
        <div class="mdl-grid fbd-content">

          <div class="fbd-graphs mdl-shadow--2dp mdl-color--white mdl-cell mdl-cell--12-col">
              <div id="holder"></div>
          <!--     {% block app_content %}{% endblock app_content %} -->
          </div>
        </div>
      </main>
    </div>
    {% block javascripts %}
    <script src="{{ url_for('static', filename='js/lib/material.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/lib/pdfjs-1.9/build/pdf.js') }}"></script>
    <script type="text/javascript">
    function renderPDF(canvasContainer, options) {

        var options = options || { scale: 1 };

        function renderPage(page) {
            var viewport = page.getViewport(options.scale);
            var canvas = document.createElement('canvas');
            var ctx = canvas.getContext('2d');
            var renderContext = {
              canvasContext: ctx,
              viewport: viewport
            };

            canvas.height = viewport.height;
            canvas.width = viewport.width;

            canvasContainer.appendChild(canvas);

            page.render(renderContext);
        }

        function renderPages(pdfDoc) {
            for(var num = 1; num <= pdfDoc.numPages; num++)
                pdfDoc.getPage(num).then(renderPage);
        }

        var encoded_data = '{{ encoded_data }}';
        var pdfData = atob(encoded_data);

        PDFJS.disableWorker = true;
        PDFJS.getDocument({data: pdfData}).then(renderPages);

    };
    renderPDF(document.getElementById('holder'));
    </script>


    {% endblock javascripts %}
  </body>
</html>
